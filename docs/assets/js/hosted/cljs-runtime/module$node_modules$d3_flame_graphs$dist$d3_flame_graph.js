shadow$provide.module$node_modules$d3_flame_graphs$dist$d3_flame_graph=function(Q,S,D,M,I){(function(){var a=[].indexOf||function(a){for(var m=0,w=this.length;m<w;m++)if(m in this&&this[m]===a)return m;return-1};var m=this.d3?this.d3:D("module$node_modules$d3$build$d3_node");if(!m)throw Error("d3.js needs to be loaded");m.flameGraphUtils={augment:function(a,D){var w=a.children;if(a.augmented)return a;a.originalValue=a.value;a.level=a.children?1:0;a.hidden=[];a.location=D;if(null==w||!w.length)return a.augmented=
!0,a;var q=w.reduce(function(a,m){return a+m.value},0);q<a.value&&w.push({value:a.value-q,filler:!0});w.forEach(function(a,q){return m.flameGraphUtils.augment(a,D+"."+q)});a.level+=w.reduce(function(a,m){return Math.max(m.level,a)},0);a.augmented=!0;return a},partition:function(a){return m.layout.partition().sort(function(a,m){return a.filler?1:m.filler?-1:a.name.localeCompare(m.name)}).nodes(a)},hide:function(a,m){null==m&&(m=!1);var w=function(a){return a.reduce(function(a,b){return a+b},0)};var q=
function(a,c){c=a.indexOf(c);if(0<=c)return a.splice(c,1)};var A=function(a,c){m?q(a.hidden,c):a.hidden.push(c);return a.value=Math.max(a.originalValue-w(a.hidden),0)};var r=function(a,c){if(a.children)return a.children.forEach(function(a){A(a,c);return r(a,c)})};var D=function(a,c){var b;for(b=[];a.parent;)A(a.parent,c),b.push(a=a.parent);return b};return a.forEach(function(a){var c=a.originalValue;D(a,c);A(a,c);return r(a,c)})}};m.flameGraph=function(D,E,w){null==w&&(w=!1);var q=function(a){if(!a)return"";
a=a.split(".");return a.slice(a.length-2).join(".")};var A=function(a){var m,k;var c=[0,0,1,10];var b=c[0];var l=c[1];var r=c[2];var f=c[3];a=q(a).slice(0,6);c=m=0;for(k=a.length-1;0<=k?m<=k:m>=k;c=0<=k?++m:--m)b+=r*(a.charCodeAt(c)%f),l+=r*(f-1),r*=.7;return 0<l?b/l:b};return new (function(){function r(a,k){this._selector=a;this._generateAccessors("margin cellHeight zoomEnabled zoomAction tooltip tooltipPlugin color".split(" "));this._ancestors=[];this.console=w?window.console:{log:function(){},
time:function(){},timeEnd:function(){}};this._size=[1200,800];this._cellHeight=20;this._margin={top:0,right:0,bottom:0,left:0};this._color=function(a){a=A(a.name);return"rgb("+(200+Math.round(55*a))+", "+(0+Math.round(230*(1-a)))+", "+(0+Math.round(55*(1-a)))+")"};if(this._zoomEnabled=this._tooltipEnabled=!0,m.tip)this._tooltipPlugin=m.tip();this.console.time("augment");this.original=m.flameGraphUtils.augment(k,"0");this.console.timeEnd("augment");this.root(this.original)}r.prototype.size=function(a){if(!a)return this._size;
this._size=a;m.select(this._selector).select(".flame-graph").attr("width",this._size[0]).attr("height",this._size[1]);return this};r.prototype.root=function(a){if(!a)return this._root;this.console.time("partition");this._root=a;this._data=m.flameGraphUtils.partition(this._root);this.console.timeEnd("partition");return this};r.prototype.hide=function(a,k){null==k&&(k=!1);a=this.select(a,!1);if(a.length)return m.flameGraphUtils.hide(a,k),this._data=m.flameGraphUtils.partition(this._root),this.render()};
r.prototype.zoom=function(m,k){if(!this.zoomEnabled())throw Error("Zoom is disabled!");this.tip&&this.tip.hide();0<=a.call(this._ancestors,m)?this._ancestors=this._ancestors.slice(0,this._ancestors.indexOf(m)):this._ancestors.push(this._root);this.root(m).render();"function"===typeof this._zoomAction&&this._zoomAction(m,k);return this};r.prototype.width=function(){return this.size()[0]-(this.margin().left+this.margin().right)};r.prototype.height=function(){return this.size()[1]-(this.margin().top+
this.margin().bottom)};r.prototype.label=function(a){return null!=a&&a.name?q(a.name).substr(0,Math.round(this.x(a.dx)/(this.cellHeight()/10*4))):""};r.prototype.select=function(a,k){null==k&&(k=!0);return k?this.container.selectAll(".node").filter(a):m.flameGraphUtils.partition(this.original).filter(a)};r.prototype.render=function(){var a;if(!this._selector)throw Error("No DOM element provided");this.console.time("render");this.container||this._createContainer();this.fontSize=this.cellHeight()/10*
.4;this.x=m.scale.linear().domain([0,m.max(this._data,function(a){return a.x+a.dx})]).range([0,this.width()]);var k=Math.floor(this.height()/this.cellHeight());var c=this._root.level;this.y=m.scale.quantize().domain([m.max(this._data,function(a){return a.y}),0]).range(m.range(c).map(function(a){return function(b){return(b+k-(a._ancestors.length+c))*a.cellHeight()}}(this)));var b=this._data.filter(function(a){return function(b){return.4<a.x(b.dx)&&0<=a.y(b.y)&&!b.filler}}(this));var l={x:function(a){return function(b){return a.x(b.x)}}(this),
y:function(a){return function(b){return a.y(b.y)}}(this),width:function(a){return function(b){return a.x(b.dx)}}(this),height:function(a){return function(b){return a.cellHeight()}}(this),text:function(a){return function(b){if(b.name&&40<a.x(b.dx))return a.label(b)}}(this)};b=this.container.selectAll(".node").data(b,function(a){return a.location}).attr("class","node");this._renderNodes(b,l);var q=b.enter().append("g").attr("class","node");this._renderNodes(q,l,!0);b.exit().remove();this.zoomEnabled()&&
this._renderAncestors()._enableNavigation();this.tooltip()&&this._renderTooltip();this.console.timeEnd("render");this.console.log("Processed "+this._data.length+" items");this.console.log("Rendered "+(null!=(a=this.container.selectAll(".node")[0])?a.length:void 0)+" elements");return this};r.prototype._createContainer=function(){m.select(this._selector).select("svg").remove();var a=m.select(this._selector).append("svg").attr("class","flame-graph").attr("width",this._size[0]).attr("height",this._size[1]);
var k="translate("+this.margin().left+", "+this.margin().top+")";this.container=a.append("g").attr("transform",k);return a.append("rect").attr("width",this._size[0]-(this._margin.left+this._margin.right)).attr("height",this._size[1]-(this._margin.top+this._margin.bottom)).attr("transform",k).attr("class","border-rect")};r.prototype._renderNodes=function(a,k,c){var b;null==c&&(c=!1);c||(b=a.selectAll("rect"));c&&(b=a.append("rect"));b.attr("fill",function(a){return function(b){return a._color(b)}}(this)).transition().attr("width",
k.width).attr("height",this.cellHeight()).attr("x",k.x).attr("y",k.y);c||a.selectAll("text");c&&a.append("text");a.selectAll("text").attr("class","label").style("font-size",this.fontSize+"em").transition().attr("dy",this.fontSize/2+"em").attr("x",function(a){return function(a){return k.x(a)+2}}(this)).attr("y",function(a){return function(b,c){return k.y(b,c)+a.cellHeight()/2}}(this)).text(k.text);return this};r.prototype._renderTooltip=function(){if(!this._tooltipPlugin||!this._tooltipEnabled)return this;
this.tip=this._tooltipPlugin.attr("class","d3-tip").html(this.tooltip()).direction(function(a){return function(k){return a.x(k.x)+a.x(k.dx)/2>a.width()-100?"w":100>a.x(k.x)+a.x(k.dx)/2?"e":"s"}}(this)).offset(function(a){return function(k){var c=a.x(k.x)+a.x(k.dx)/2;k=Math.max(Math.ceil(a.x(k.dx)/2),5);var b=Math.ceil(a.cellHeight()/2);return a.width()-100<c?[0,-k]:100>c?[0,k]:[b,0]}}(this));this.container.call(this.tip);this.container.selectAll(".node").on("mouseover",function(a){return function(k){return a.tip.show(k,
m.event.currentTarget)}}(this)).on("mouseout",this.tip.hide).selectAll(".label").on("mouseover",function(a){return function(k){return a.tip.show(k,m.event.currentTarget.parentNode)}}(this)).on("mouseout",this.tip.hide);return this};r.prototype._renderAncestors=function(){var a,k;if(!this._ancestors.length){var c=this.container.selectAll(".ancestor").remove();return this}c=this._ancestors.map(function(a,b){return{name:a.name,value:b+1,location:a.location}});var b=a=0;for(k=c.length;a<k;b=++a){var l=
c[b];if(b=c[b-1])b.children=[l]}l={x:function(a){return function(a){return 0}}(this),y:function(a){return function(b){return a.height()-b.value*a.cellHeight()}}(this),width:this.width(),height:this.cellHeight(),text:function(a){return function(a){return"â†© "+q(a.name)}}(this)};c=this.container.selectAll(".ancestor").data(m.layout.partition().nodes(c[0]),function(a){return a.location});this._renderNodes(c,l);a=c.enter().append("g").attr("class","ancestor");this._renderNodes(a,l,!0);c.exit().remove();
return this};r.prototype._enableNavigation=function(){var a=function(a){return function(c){var b;return 0<Math.round(a.width()-a.x(c.dx))&&(null!=(b=c.children)?b.length:void 0)}}(this);this.container.selectAll(".node").classed("clickable",function(k){return function(c){return a(c)}}(this)).on("click",function(k){return function(c){k.tip&&k.tip.hide();if(a(c))return k.zoom(c,m.event)}}(this));this.container.selectAll(".ancestor").on("click",function(a){return function(c,b){a.tip&&a.tip.hide();return a.zoom(a._ancestors[b],
m.event)}}(this));return this};r.prototype._generateAccessors=function(a){var k;var c=[];var b=0;for(k=a.length;b<k;b++){var l=a[b];c.push(this[l]=function(a){return function(b){if(!arguments.length)return this["_"+a];this["_"+a]=b;return this}}(l))}return c};return r}())(D,E)}}).call(this)}
//# sourceMappingURL=module$node_modules$d3_flame_graphs$dist$d3_flame_graph.js.map
