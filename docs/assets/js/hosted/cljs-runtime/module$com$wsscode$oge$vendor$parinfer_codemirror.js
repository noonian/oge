shadow$provide.module$com$wsscode$oge$vendor$parinfer_codemirror=function(R,T,F,O,H){(function(a,m){"function"===typeof define&&define.amd?define([],m):"object"===typeof O&&O.exports?O.exports=m():a.parinferCodeMirror=m()})(this,function(){function a(a){return"parinferCodeMirror: "+a}function m(b){if(-1===J.indexOf(b))throw a('Mode "'+b+'" is invalid. Must be one of: '+J.join(","));}function D(b){b=b.__parinfer__;if(!b)throw a("You must call parinferCodeMirror.init(cm) on a CodeMirror instance before you can use the rest of the API.");
return b}function B(a){return a.map(function(a){return{x:a.from.ch,lineNo:a.from.line,oldText:a.removed.join("\n"),newText:a.text.join("\n")}})}function x(a,b){var d=a.getAllMarks();for(a=0;a<d.length;a++)d[a].className===b&&d[a].clear()}function v(a,b,d,f,g){a.markText({line:b,ch:d},{line:b,ch:f},{className:g})}function r(a,b){x(a,"parinfer-error");b&&(v(a,b.lineNo,b.x,b.x+1,"parinfer-error"),b.extra&&v(a,b.extra.lineNo,b.extra.x,b.extra.x+1,"parinfer-error"))}function E(a,b){x(a,"parinfer-paren-trail");
if(b){var d;for(d=0;d<b.length;d++){var f=b[d];v(a,f.lineNo,f.startX,f.endX,"parinfer-paren-trail")}}}function Q(a){a=a.listSelections()[0];return Math.min(a.head.line,a.anchor.line)}function k(a,b,d){if(!a)return null;var f,g;for(f=0;f<a.length;f++){var h=a[f];if(b<h){var k=h;break}b>h&&(g=h)}if(-1===d)return g;if(1===d)return k}function d(a,b){a=a.getLine(b);for(b=0;b<a.length;b++)if(" "!==a[b])return b;return null}function b(a,b){var f=a.somethingSelected(),g;if(g=D(a).tabStops){var h=[],n;for(n=
0;n<g.length;n++){var m=g[n];-1>=m.x&&h.pop();h.push(m.x);h.push(m.x+("("===m.ch?2:1));null!=m.argX&&h.push(m.argX)}g=h}else g=null;f?(f=g,g=Q(a),g=d(a,g),f=k(f,g,b),null==f&&(f=Math.max(0,g+2*b)),a.indentSelection(f-g)):(n=g,h=a.getCursor(),f=h.line,g=h.ch,h=d(a,h.line),n=k(n,g,b),b=null==n||null!=h&&g!==h?Math.max(0,g+2*b):n,null!=h&&h<g&&g<b?(b=Array(b-g+1).join(" "),a.replaceSelection(b)):(b-=g,""!==a.getDoc().getLine(f).trim()?a.indentLine(f,b):0<b?(b=Array(b+1).join(" "),a.replaceSelection(b)):
(g=a.getCursor().ch,a.replaceRange("",{line:f,ch:g+b},{line:f,ch:g},"+indent"))))}function u(a,b){return b.line===a.lineNo&&a.startX<=b.ch}function P(a,b){var d;for(d=0;d<b.length;d++){var f=a,g=b[d],h=f.getDoc().sel,k=h.ranges[0];(k=g.lineNo===g.closer.lineNo||!g.closer.trail||u(g.closer.trail,k.anchor)||u(g.closer.trail,k.head))||(k=g.closer,k=-1!==h.contains({line:k.lineNo,ch:k.x}));k||v(f,g.closer.lineNo,g.closer.x,g.closer.x+1,"parinfer-locus-paren");P(f,g.children)}}function f(a,b){a=a.charCoords({line:b.lineNo,
ch:b.x},"local");return{midx:a.left+(a.right-a.left)/2,right:a.right,left:a.left,top:a.top,bottom:a.bottom}}function g(a,b){var d;for(d=0;d<b.length;d++){var h=a,k=b[d],n=h.__parinfer__.layer,m=n.paper,u=f(h,k),r=f(h,k.closer);if(k.closer.trail&&k.lineNo!==k.closer.lineNo)switch(n.type){case "guides":m.path(["M",u.midx,u.bottom,"V",r.bottom].join(" "));break;case "locus":n=h;var K=k.lineNo;for(var I=k.closer.lineNo,G=n.getDoc(),v=0,M=0;K<=I;K++){var P=G.getLine(K);P.length>v&&(v=P.length,M=K)}n=f(n,
{lineNo:M,x:v}).right;m.path(["M",u.midx,u.top+4,"A",4,4,0,0,1,u.midx+4,u.top,"H",n-4,"A",4,4,0,0,1,n,u.top+4,"V",r.bottom,"H",u.midx,"V",u.bottom].join(" "))}g(h,k.children)}}function M(a,b){a=a.__parinfer__.layer;a.type=b;b=document.createElement("div");b.style.position="absolute";b.style.left="0";b.style.top="0";b.style["z-index"]=100;b.className="parinfer-locus";a.el=b;a.container.appendChild(b);a.paper=Raphael(b,a.container.clientWidth,a.container.clientHeight)}function h(a){(a=a.__parinfer__.layer)&&
a.el&&a.container.removeChild(a.el)}function n(a,b){x(a,"parinfer-locus-paren");b&&(P(a,b),h(a),M(a,"locus"),g(a,b))}function ea(a,b){b&&(h(a),M(a,"guides"),g(a,b))}function Aa(a,b){var d=a.cm,f=d.getValue(),g=d.somethingSelected(),h=d.listSelections(),k=d.getCursor(),u=d.getScrollerElement();k={cursorLine:k.line,cursorX:k.ch,prevCursorLine:a.prevCursorLine,prevCursorX:a.prevCursorX};g&&(k.selectionStartLine=Q(d));if(a.options)for(var v in a.options)a.options.hasOwnProperty(v)&&(k[v]=a.options[v]);
b&&(k.changes=B(b));v=a.options&&a.options.locus;var K=a.options&&a.options.guides;if(v||K)delete k.locus,delete k.guides,k.returnParens=!0;var I=a.fixMode?"paren":a.mode;switch(I){case "indent":var G=parinfer.indentMode(f,k);break;case "paren":G=parinfer.parenMode(f,k);break;case "smart":G=parinfer.smartMode(f,k);break;default:m(I)}a.parens=G.parens;a.tabStops=G.tabStops;f!==G.text&&(f=d.getHistory(),d.setValue(G.text),a.monitorCursor=!1,g?d.setSelections(h):d.setCursor(G.cursorLine,G.cursorX),d.setHistory(f),
setTimeout(function(){a.monitorCursor=!0},0),d.scrollTo(u.scrollLeft,u.scrollTop));r(d,G.error);E(d,G.parenTrails);a.prevCursorLine=G.cursorLine;a.prevCursorX=G.cursorX;v?n(d,G.parens):K&&ea(d,G.parens);return a.fixMode&&G.success?(a.fixMode=!1,Aa(a,b)):G.success}function V(a){clearTimeout(a.cursorTimeout);a.monitorCursor&&(a.cursorTimeout=setTimeout(function(){Aa(a)},0))}function ja(a){if(!a.enabled){a.callbackCursor=function(b){V(a)};a.callbackChanges=function(b,d){clearTimeout(a.cursorTimeout);
"setValue"!==d[0].origin&&Aa(a,d)};var d=a.cm;d.on("cursorActivity",a.callbackCursor);d.on("changes",a.callbackChanges);a.parinferKeys={Tab:function(a){b(a,1)},"Shift-Tab":function(a){b(a,-1)}};d.addKeyMap(a.parinferKeys);a.enabled=!0}}function ka(a){a=D(a);"paren"!==a.mode&&(a.fixMode=!0);ja(a);return Aa(a)}var J=["paren","indent","smart"];return{version:"1.3.1",init:function(b,d,f){var g=b.__parinfer__;if(g)throw a("init has already been called on this CodeMirror instance");d=d||"smart";m(d);g=
{cm:b,mode:d,options:f,enabled:!1,cursorTimeout:null,monitorCursor:!0,prevCursorX:null,prevCursorLine:null,callbackCursor:null,callbackChanges:null};d=b.__parinfer__=g;f=b.getWrapperElement().querySelector(".CodeMirror-lines").parentNode;d.layer={container:f};return ka(b)},enable:ka,disable:function(a){a=D(a);if(a.enabled){var b=a.cm;x(b,"parinfer-error");x(b,"parinfer-paren-trail");b.off("cursorActivity",a.callbackCursor);b.off("changes",a.callbackChanges);b.removeKeyMap(a.parinferKeys);a.enabled=
!1}},setMode:function(a,b){a=D(a);m(b);a.mode=b;return Aa(a)},setOptions:function(a,b){a=D(a);a.options=b;return Aa(a)}}})}
//# sourceMappingURL=module$com$wsscode$oge$vendor$parinfer_codemirror.js.map
