{"version":3,"file":"fulcro.inspect.ui.events.js","sources":["fulcro/inspect/ui/events.cljs"],"mappings":"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","names":["fulcro.inspect.ui.events/KEYS","cljs.spec.alpha/def-impl","cljs.core/set","cljs.core/keys","cljs.spec.alpha/and-spec-impl","cljs.core/string?","cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$5","p1__42563#","p1__42564#","clojure.string.split.cljs$core$IFn$_invoke$arity$2","clojure.string.join.cljs$core$IFn$_invoke$arity$2","cljs.spec.alpha/cat-impl","cljs.spec.alpha/rep-impl","cljs.core/pos-int?","fulcro.inspect.ui.events/key-code","name","cljs.core.get.cljs$core$IFn$_invoke$arity$2","fulcro.inspect.ui.events/parse-keystroke","keystroke","temp__5455__auto__","map__42571","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","modifiers","key","cljs.spec.alpha/conform","js/console.warn","p__42578","map__42579","fulcro.inspect.ui.events/match-modifiers?","e","p1__42576#","cljs.core/every?","G__42581","G__42582","goog.object/get","p__42586","map__42587","fulcro.inspect.ui.events/match-key?","key-code","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","fulcro.inspect.ui.events/handle-event","this","map__42592","map__42593","action","fulcro.client.primitives/props","matcher","and__3911__auto__","fulcro.inspect.ui.events/read-target","target","cljs.core/fn?","js/document.body","fulcro.inspect.ui.events/start-handler","p1__42601#","map__42603","handler","event","or__3922__auto__","G__42605","G__42606","G__42607","goog.object/set","fulcro.inspect.ui.events/dispose-handler","map__42616","map__42618","this__38666__auto__","js/React.Component","goog.object/clone","js/React.Component.prototype","x42631","next-props__38522__auto__","next-state__38523__auto__","this__38521__auto__","fulcro.client.primitives/*blindly-render*","next-children__38524__auto__","G__42633","fulcro.client.primitives/FulcroProps","fulcro.client.primitives/unwrap","current-props__38525__auto__","next-props-stale?__38526__auto__","fulcro.client.primitives/get-basis-time","props-changed?__38527__auto__","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","state-changed?__38528__auto__","G__42636","G__42637","children-changed?__38529__auto__","indexer__38536__auto__","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","fulcro.client.primitives/get-reconciler","fulcro.client.impl.protocols/index-component!","this__38511__auto__","reconciler__38512__auto__","lifecycle__38513__auto__","G__42639","G__42640","this__38514__auto__","reconciler__38515__auto__","lifecycle__38516__auto__","cfg__38517__auto__","st__38518__auto__","indexer__38519__auto__","cljs.core/deref","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic","cljs.core/update-in","cljs.core/dissoc","G__42641","G__42642","fulcro.client.impl.protocols/drop-component!","next-props__38498__auto__","next-state__38499__auto__","this__38497__auto__","fulcro.client.primitives/-next-props","ret__38500__auto__","ident__38501__auto__","fulcro.client.primitives/ident","next-ident__38502__auto__","idxr__38503__auto__","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","indexes__38504__auto__","cljs.core.update_in.cljs$core$IFn$_invoke$arity$4","cljs.core/disj","cljs.core.fnil.cljs$core$IFn$_invoke$arity$2","cljs.core/conj","fulcro.client.primitives/merge-pending-props!","fulcro.client.primitives/merge-pending-state!","prev-props__38506__auto__","prev-state__38507__auto__","this__38505__auto__","fulcro.client.primitives/-prev-props","fulcro.client.primitives/clear-prev-props!","this__38520__auto__","*reconciler*42649","fulcro.client.primitives/*reconciler*","*depth*42650","fulcro.client.primitives/*depth*","*shared*42651","fulcro.client.primitives/*shared*","*instrument*42652","fulcro.client.primitives/*instrument*","*parent*42653","fulcro.client.primitives/*parent*","fulcro.client.primitives/depth","fulcro.client.primitives.shared.cljs$core$IFn$_invoke$arity$1","fulcro.client.primitives/instrument","x42655","x42656","this__38669__auto__","writer__38670__auto__","opt__38671__auto__","cljs.core/-write","fulcro.inspect.ui.events/KeyListener","_","fulcro.client.dom/macro-create-element*","fulcro.inspect.ui.events/key-listener","fulcro.client.primitives.factory.cljs$core$IFn$_invoke$arity$1"],"sourcesContent":["(ns fulcro.inspect.ui.events\n  (:require [cljs.spec.alpha :as s]\n            [clojure.string :as str]\n            [goog.object :as gobj]\n            [fulcro.client.dom :as dom]\n            [fulcro.client.primitives :as fp]))\n\n(def KEYS\n  {\"backspace\" 8\n   \"tab\"       9\n   \"return\"    13\n   \"escape\"    27\n   \"space\"     32\n   \"left\"      37\n   \"up\"        38\n   \"right\"     39\n   \"down\"      40\n   \"slash\"     191\n   \"a\"         65\n   \"b\"         66\n   \"c\"         67\n   \"d\"         68\n   \"e\"         69\n   \"f\"         70\n   \"g\"         71\n   \"h\"         72\n   \"i\"         73\n   \"j\"         74\n   \"k\"         75\n   \"l\"         76\n   \"m\"         77\n   \"n\"         78\n   \"o\"         79\n   \"p\"         80\n   \"q\"         81\n   \"r\"         82\n   \"s\"         83\n   \"t\"         84\n   \"u\"         85\n   \"v\"         86\n   \"w\"         87\n   \"x\"         88\n   \"y\"         89\n   \"z\"         90})\n\n(s/def ::key-string (set (keys KEYS)))\n(s/def ::modifier #{\"ctrl\" \"alt\" \"meta\" \"shift\"})\n(s/def ::keystroke\n  (s/and string?\n         (s/conformer #(str/split % #\"-\") #(str/join \"-\" %))\n         (s/cat :modifiers (s/* ::modifier) :key ::key-string)))\n(s/def ::key-code pos-int?)\n\n(defn key-code [name] {::key-code (get KEYS name)})\n\n(defn parse-keystroke [keystroke]\n  (if-let [{:keys [modifiers key]} (s/conform ::keystroke keystroke)]\n    {::key-code  (get KEYS key)\n     ::modifiers modifiers}\n    (js/console.warn (str \"Keystroke `\" keystroke \"` is not valid.\"))))\n\n(defn match-modifiers? [e {::keys [modifiers]}]\n  (every? #(gobj/get e (str % \"Key\")) modifiers))\n\n(defn match-key? [e {::keys [key-code]}]\n  (= (gobj/get e \"keyCode\") key-code))\n\n(defn handle-event [this e]\n  (let [{::keys [action]} (fp/props this)\n        {:keys [matcher]} (gobj/get this \"matcher\")]\n    (when (and (match-key? e matcher)\n               (match-modifiers? e matcher))\n      (action e))))\n\n(defn read-target [target]\n  (cond\n    (fn? target) (target)\n    (nil? target) js/document.body\n    :else target))\n\n(defn start-handler [this]\n  (if-let [matcher (parse-keystroke (-> this fp/props ::keystroke))]\n    (let [handler #(handle-event this %)\n          {::keys [target event]} (fp/props this)\n          target (read-target target)\n          event  (or event \"keydown\")]\n      (gobj/set this \"matcher\" {:handler handler\n                                :matcher matcher})\n      (if target\n        (.addEventListener target event handler)))))\n\n(defn dispose-handler [this]\n  (if-let [{:keys [handler]} (gobj/get this \"matcher\")]\n    (let [{::keys [target event]} (fp/props this)\n          target (read-target target)\n          event  (or event \"keydown\")]\n      (if target\n        (.removeEventListener target event handler)))))\n\n(fp/defui ^:once KeyListener\n  Object\n  (componentDidMount [this] (start-handler this))\n  (componentWillUnmount [this] (dispose-handler this))\n  (componentWillUpdate [this _ _] (dispose-handler this))\n  (componentDidUpdate [this _ _] (start-handler this))\n\n  (render [_]\n    (dom/noscript nil)))\n\n(def key-listener (fp/factory KeyListener))\n"]}