{"version":3,"file":"fulcro.inspect.lib.local_storage.js","sources":["fulcro/inspect/lib/local_storage.cljs"],"mappings":";;;;;AAMA,gDAAA,hDAAMA,wGAAcC;AAApB,AACE,OAACC,uBAAO,AAACC,sDAAkBF;;AAE7B,iDAAA,jDAAMG,0GAAeC;AAArB,AACE,OAACC,wBAAQ,AAACC,sDAAkBF;;AAE9B,AAAKG,iDAAc,AAAgBC;AAEnC,AAAA,uCAAA,+CAAAC,tFAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,mEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,mEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,AAAA,qEAAA,rEAAMD,gFACFE;AADJ,AACS,8EAAA,vEAACC,mEAAID;;;AADd,AAAA,qEAAA,rEAAMF,gFAEFE,IAAIE;AAFR,AAGG,IAAAC,qBAAe,AAAUT,uDAAc,AAACW,wGAAOL;AAA/C,AAAA,oBAAAG;AAAA,YAAAA,RAASC;AAAT,AACE,OAACE,sDAAYF;;AACbF;;;;AALL,AAAA,+DAAA,/DAAMJ;;AAAN,AAOA,6CAAA,7CAAMS,kGAAMP,IAAII;AAAhB,AACE,OAAUV,uDAAc,AAACW,wGAAOL,UAAK,AAACK,wGAAOD;;AAE/C,AAAA,wCAAA,gDAAAR,xFAAMa;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,oEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,oEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAV,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,AAAA,sEAAA,tEAAMU,iFACFT;AADJ,AACS,+EAAA,xEAACU,oEAAKV;;;AADf,AAAA,sEAAA,tEAAMS,iFAEFT,IAAIE;AAFR,AAGG,IAAAC,qBAAe,AAAUT,uDAAc,AAACW,wGAAOL;AAA/C,AAAA,oBAAAG;AAAA,YAAAA,RAASC;AAAT,AACE,OAAClB,8CAAakB;;AACdF;;;;AALL,AAAA,gEAAA,hEAAMO;;AAAN,AAOA,8CAAA,9CAAME,oGAAOX,IAAII;AAAjB,AACE,OAAUV,uDAAc,AAACW,wGAAOL,UAAK,AAACV,+CAAcc;;AAEtD,gDAAA,hDAAMQ,wGAASZ;AAAf,AACE,OAAaN,0DAAcM;;AAE7B,gDAAA,hDAAMa,wGAASb,IAAIc;AAAnB,AACE,OAAUpB,uDAAc,AAACW,wGAAOL,UAAK,AAACK,wGAAO,iBAAAU,WAAG,AAACC,mEAAIhB;AAAR,AAAA,0EAAAe,wBAAAA,1FAACD,kCAAAA,4CAAAA;;;AAEhD","names":["fulcro.inspect.lib.local-storage/read-transit","s","cognitect.transit/read","fulcro.transit.reader.cljs$core$IFn$_invoke$arity$0","fulcro.inspect.lib.local-storage/write-transit","x","cognitect.transit/write","fulcro.transit.writer.cljs$core$IFn$_invoke$arity$0","fulcro.inspect.lib.local-storage/local-storage","js/window","var_args","G__37112","fulcro.inspect.lib.local-storage/get","js/Error","key","fulcro.inspect.lib.local_storage.get.cljs$core$IFn$_invoke$arity$2","default","temp__5455__auto__","value","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1","fulcro.inspect.lib.local-storage/set!","G__37117","fulcro.inspect.lib.local-storage/tget","fulcro.inspect.lib.local_storage.tget.cljs$core$IFn$_invoke$arity$2","fulcro.inspect.lib.local-storage/tset!","fulcro.inspect.lib.local-storage/remove!","fulcro.inspect.lib.local-storage/update!","f","G__37125","fulcro.inspect.lib.local_storage.get.cljs$core$IFn$_invoke$arity$1"],"sourcesContent":["(ns fulcro.inspect.lib.local-storage\n  (:refer-clojure :exclude [get set!])\n  (:require [cljs.reader :refer [read-string]]\n            [cognitect.transit :as t]\n            [fulcro.transit :as f.transit]))\n\n(defn read-transit [s]\n  (t/read (f.transit/reader) s))\n\n(defn write-transit [x]\n  (t/write (f.transit/writer) x))\n\n(def local-storage (.-localStorage js/window))\n\n(defn get\n  ([key] (get key nil))\n  ([key default]\n   (if-let [value (.getItem local-storage (pr-str key))]\n     (read-string value)\n     default)))\n\n(defn set! [key value]\n  (.setItem local-storage (pr-str key) (pr-str value)))\n\n(defn tget\n  ([key] (tget key nil))\n  ([key default]\n   (if-let [value (.getItem local-storage (pr-str key))]\n     (read-transit value)\n     default)))\n\n(defn tset! [key value]\n  (.setItem local-storage (pr-str key) (write-transit value)))\n\n(defn remove! [key]\n  (.removeItem local-storage key))\n\n(defn update! [key f]\n  (.setItem local-storage (pr-str key) (pr-str (f (get key)))))\n\n(comment\n  (tset! [:sample \"value\"] {:hello \"World\"}))\n"]}