{"version":3,"file":"fulcro.inspect.ui.dom_history_viewer.js","sources":["fulcro/inspect/ui/dom_history_viewer.cljs"],"mappings":";;;;;;AAOA,AAAAA,sBAAAC,+BAAA,uJAAA,WAAAC,SAAAC,EAA+BA;AAA/B,AAAA,OAAAC,uGAAA,iBAAAC,aAAAH;IAAAG,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAC,gCAAA,AAAAD,+BAAA,KAAA,OAAA,QAAA,AAAAE,8CAAAC,mBAAAH,YAAAA;YAAA,AAAAI,4CAAAJ,eAAA,nEACmBK;AADnB,AAAA,kDAAA,yDAAA;;AAAA,AAEI,mFAAA,mFAAA,uIAAA,gEAAA,wEAAA,9aAACC,mDAAMD,MAAME;;;KAFjB,uBAAAV,NAGYW;AAHZ,AAAA,kDAAA,2DAAA,AAAA,mFAAA;;;AAKA,AAAAb,sBAAAC,+BAAA,wJAAA,WAAAa,SAAAX,EAA+BA;AAA/B,AAAA,OAAAC,uGAAA,iBAAAW,aAAAD;IAAAC,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAT,gCAAA,AAAAS,+BAAA,KAAA,OAAA,QAAA,AAAAR,8CAAAC,mBAAAO,YAAAA;YAAA,AAAAN,4CAAAM,eAAA,nEACmBL;AADnB,AAAA,kDAAA,yDAAA;;AAAA,AAEI,mFAAA,mFAAA,uIAAA,gEAAA,wEAAA,9aAACC,mDAAMD,MAAME;;;KAFjB,uBAAAE,NAGYD;AAHZ,AAAA,kDAAA,2DAAA,AAAA,mFAAA;;;AAKA,AAAA,GAAA,OAAAG;AAAA;AAAA,AAAA;;;;AAAAA,sDAAA;AAAA,AAAA,IAAAC,sBAAA;AAAA,AAAA,AAAAC,sBAAAD,oBAAA;;AAAA,GAAA,EAAA,CAAA,AAAAA,sCAAA;AAAA,AAAA,AAAAA,4BAAA,AAAAA;;AAAA,AAAA,AAAAA,4BAAA;;;AAAAA;;;AAAA,AAAA,AAAAD,gEAAA,AAAAG,kBAAAC;;;AAAA,IAAAC,eAAA,AAAAL;AAAA,AAAA,AAAA,AAAA,AAAAK,iCAAA;;AAAA,AAAA,IAAAC,sBAAA;AAAA,AAAA,OAAAC,gBAAAD,oBAAA,iBAAA;;;;AAAA,AAAA,AAAAD,mCAAA;kBAAAG,0BAAAC;AAAA,AAAA,IAAAH,sBAAA;AAAA,AAAA,GAAA,EAAA,EAAA,CAAAA,uBAAA,QAAA,EAAA,EAAA,WAAA,CAAAhB,gCAAA,AAAAgB,wDAAA,KAAA,OAAA;AAAA,AAAA,IAAAI,6BAAA,AAAAC,+BAAAL,oBAAA,AAAAM,+BAAAN;IAAAO,kCAAA,AAAAF,+BAAAL,oBAAA,AAAAQ,qCAAAN,0BAAAF;AAAA,AAAA,GAAA,AAAAS,gDAAAL,2BAAAG;AAAA,AAAA,IAAAG,4BAAA,AAAAC,+CAAA,AAAAC,wCAAAZ,qBAAA,mFAAA,wDAAA;AAAA,AAAA,GAAA,CAAAU,6BAAA;AAAA;AAAA,AAAA,AAAAG,mDAAA,AAAA,yFAAAH,2BAAA;kBAAAI;AAAA,AAAA,OAAAC,kDAAA,AAAAA,kDAAAD,uBAAA,mFAAA,2EAAAV,mCAAAY,eAAAhB,qBAAA,mFAAA,2EAAAO,wCAAA,AAAAU,6CAAAC,eAAA,mCAAAlB;;;;;AAAA;;AAAA;;AAAA,AAAAmB,mDAAAnB;;AAAA,OAAAoB,mDAAApB;;;;AAAA,AAAA,AAAAD,qCAAA;kBAAAG,0BAAAC;AAAA,AAAA,IAAAH,sBAAA;AAAA,AAAA,GAAAqB;AAAA;;AAAA,IAAAC,+BAAA,AAAApB;IAAAA,gCAAA,AAAAqB,gBAAArB,0BAAA;IAAAA,gCAAA,iBAAAsB,WAAAtB;AAAA,AAAA,GAAA,CAAAA,yCAAAuB;AAAA,OAAAC,gCAAAF;;AAAAA;;;IAAAG,+BAAA,AAAArB,+BAAAN;IAAA4B,yCAAA,CAAA,AAAAC,wCAAAF,gCAAA,AAAAE,wCAAA3B;IAAA4B,sCAAA,EAAA,EAAAF,6CAAA,AAAAnB,gDAAAkB,6BAAAzB;IAAA6B,sCAAA,iBAAAC,oBAAA,AAAAhC;AAAA,AAAA,oBAAAgC;AAAA,OAAAvB,gDAAA,iBAAAwB,WAAA,AAAAjC;IAAAkC,WAAA;AAAA,AAAA,OAAAX,gBAAAU,SAAAC;KAAA,AAAAX,gBAAApB,0BAAA;;AAAA6B;;;IAAAG,yCAAA,AAAA1B,gDAAA,AAAA,AAAAT,mCAAAsB;AAAA,AAAA,IAAAc,mBAAAN;AAAA,AAAA,GAAAM;AAAAA;;AAAA,IAAAA,uBAAAL;AAAA,AAAA,oBAAAK;AAAAA;;AAAAD;;;;;;;AAAA,AAAA,AAAApC,oCAAA;;AAAA,AAAA,IAAAC,sBAAA;AAAA,AAAA,IAAAqC,mBAAA,AAAAzB,wCAAAZ;IAAAsC,qBAAA,AAAA,sFAAAD;IAAAE,oBAAA,AAAA,sFAAAD;IAAAE,yBAAA,AAAA,0FAAAF;AAAA,AAAA,AAAArC,gBAAAD,oBAAA,iBAAA;;AAAA,oBAAA,iBAAAgC,oBAAA,EAAA,CAAAO,qBAAA;AAAA,AAAA,GAAAP;AAAA,OAAArB,+CAAA,AAAA8B,gBAAAF,mBAAA,mFAAA,0GAAAvC;;AAAAgC;;;AAAA,AAAA,AAAAU,0DAAAH,kBAAAI,oBAAA,mFAAA,kHAAAC,mEAAA5C;;AAAA;;AAAA,GAAA,CAAAwC,0BAAA;AAAA;;AAAA,AAAA,OAAAK,kDAAAL,uBAAAxC;;;;;AAAA,AAAA,AAAAD,kCAAA;kBAAA+C,0BAAAC;AAAA,AAAA,IAAA/C,sBAAA;AAAA,AAAA,OAAAgD,gDAAAhD;;;;AAAA,AAAA,AAAAD,kCAAA;;AAAA,AAAA,IAAAC,sBAAA;AAAA,AAAA,IAAAwC,yBAAA,AAAA7B,+CAAA,AAAAC,wCAAAZ,qBAAA,mFAAA,wDAAA;AAAA,AAAA,GAAA,CAAAwC,0BAAA;AAAA;;AAAA,AAAA,OAAAS,mDAAAT,uBAAAxC;;;;;AAAA,AAAA,AAAAD,sBAAA;;AAAA,AAAA,IAAAmD,sBAAA;AAAA,AAAA,YAAAA,RAAuBgC;AAAvB,AAAA,IAAA/B,8BAAAC;IAAAC,yBAAAC;IAAAC,0BAAAC;IAAAC,8BAAAC;IAAAC,0BAAAC;AAAA,AAAA,AAAAR,kDAAA,AAAAxC,wCAAAsC;;AAAA,AAAAI,6CAAA,CAAA,AAAAO,+BAAAX,uBAAA;;AAAA,AAAAM,8CAAA,AAAAM,8DAAAZ;;AAAA,AAAAQ,kDAAA,AAAAK,oCAAAb;;AAAA,AAAAU,8CAAAV;;AAAA,IAAA,AAAA,IAAAc,aAAA,AAAA1D,+BAAuB4E;IAAvBlB,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAhF,gCAAA,AAAAgF,+BAAA,KAAA,OAAA,QAAA,AAAA/E,8CAAAC,mBAAA8E,YAAAA;qBAAA,AAAA7E,4CAAA6E,eAAA,5EAAoCmB;gBAApC,AAAAhG,4CAAA6E,eAAA,vEAAgDoB;IAAhDnB,aAAA,AAAAC,oEAAuBgB;IAAvBjB,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAjF,gCAAA,AAAAiF,+BAAA,KAAA,OAAA,QAAA,AAAAhF,8CAAAC,mBAAA+E,YAAAA;iBAAA,AAAA9E,4CAAA8E,eAAA,xEAAoEoB;IAApElB,aAAA,AAAAC,8BAAO1E;IAAPyE,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAnF,gCAAA,AAAAmF,+BAAA,KAAA,OAAA,QAAA,AAAAlF,8CAAAC,mBAAAiF,YAAAA;kBAAA,AAAAhF,4CAAAgF,eAAA,zEAAyFmB;aAAzF,AAAAnG,4CAAAgF,eAAA,pEAAqGoB;AAArG,AAcE,IAAAC,qBAAsB,AAAA,gGAAaH;AAAnC,AAAA,oBAAAG;AAAA,AAAA,iBAAAA,bAAWC;AAAX,AACE,IAAMC,iBAAuB,AAACC,oCAAgB,AAACC,kCAAcH;IACvDI,yBAAuB,AAACC,+DAAaJ;IACrCK,aAAuB,AAACC,iEAAeN,eAAeN;IACtDa,YAAuB,AAACC,mEAAcH,WAAWX,UAAUA;AAHjE,AAIE,OAAAe,6CAAA,CAAA,MAAA,6LAAA,sCAAA,pNAAyB,0DAAA,bAAKb,6DAAgB,kCAAA,KAAA,rBAAUH,qBAASI;;AAAjE,AAE0B,mFAAA,AAAAc,cAAA,AAAAC,iDAAA,AAAAC,cAAA,AAAAC,+CAAA,KAAAC,eAAA,KAAA,AAAAH,iDAAA,AAAAC,cAAA,AAAAG,+CAAA,KAAAD,eAAA,KAAA,wJAAA,KAAA,IAAA,OAAA,KAAAA,eAAA,KAAA,AAAAxH,8CAAA0H,oBAAA,AAAAL,iDAAA,AAAAC,cAAA,AAAAK,oDAAA,KAAA,IAAA,UAAA,KAAA,IAAA,1vBAACC,sEAAa3B;;GAFxC,AAAAkB,2BAGE,CAACP,uDAAAA,kEAAAA,bAAuBI,8CAAAA;;AAR9B;;UAdF,AAAA,AAAArC,8CAAAD;;AAAA,AAAAD,kDAAAD;;AAAA,AAAAD,8CAAAD;;AAAA,AAAAD,6CAAAD;;AAAA,AAAAD,kDAAAD;;;;AAAApD;AAAA,AAAA,AAAA,AAAAL,4EAAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,wFAAA;;AAAA,AAAA,mFAAA,nFA4gBsC,AAAAA;;AA5gBtC,IAAA2E,eAAA3E;AAAA,AAAA,AAAA,AAAA,AAAA2E,mCAAArF;;AAAA,AAAA,AAAAqF,sDAAA;kBAAAxF;AAAA,AAAA,IAAAA,QAAA;AAAA,AAAA,0FAAA,mFAAA,yDAAA,2CAAA,mEAAA,wBAAA,mFAAA,4DAAA,2CAAA,0DAAA,qEAAA,mFAAA,sEAAA,2CAAA,2DAAA,QAAA,8DAAA,6DAAA,uDAAA,QAAA,yDAAA,QAAA,oDAAA,IAAA,qDAAA,IAAA,0DAAA,IAAA,4EAAA;;;;AAAA,AAAA,AAAAwF,2DAkgGmC;kBAAAxF;AAAA,AAAA,IAAAA,QAAA;AAAA,AAAA;;;;AAlgGnC,AAAA,AAAAwF,yDAAArF;;AAAA,AAAA,AAAAqF,8EAAA;kBAAAC,EAAAC;AAAA,AAAA,IAAAD,QAAA;AAAA,AAAA,OAAAE,wCAAA,2CAAA,gEAAA,MAAA,gEAAA,2CAAA,mCAAAD;;;;AAAA,AAAA,AAAAF,+CAAArF;;AAAA,AAAA,AAAAqF,4DAAA;wBAAAI,NAAuBS;AAAvB,AAAA,IAAAR,aAAAD;IAAAC,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAA1F,gCAAA,AAAA0F,+BAAA,KAAA,OAAA,QAAA,AAAAzF,8CAAAC,mBAAAwF,YAAAA;qBAAA,AAAAvF,4CAAAuF,eAAA,5EAAoCS;gBAApC,AAAAhG,4CAAAuF,eAAA,vEAAgDU;AAAhD,AAAA,gBAAA,ZAAuBF;AAAvB,AAAA,0FAAA,uIAAA;;;;AAAA,AAAA,AAAAb,gDAAArF;;AAAA,AAAA,AAAAqF,6DAAA;kBAAuBa;AAAvB,AAAA,gBAAA,ZAAuBA;AAAvB,AAAA,0FAAA,gEAAA;;;;AAAAb;AAAA,IAAAM,eAAA,AAAAjF;AAAA,AAAA,AAAA,AAAA,AAAAiF,mCAAA3F;;AAAA,AAAA,AAAA2F,sDAAA;kBAAA9F;AAAA,AAAA,IAAAA,QAAA;AAAA,AAAA,0FAAA,mFAAA,yDAAA,2CAAA,mEAAA,wBAAA,mFAAA,4DAAA,2CAAA,0DAAA,qEAAA,mFAAA,sEAAA,2CAAA,2DAAA,QAAA,8DAAA,6DAAA,uDAAA,QAAA,yDAAA,QAAA,oDAAA,IAAA,qDAAA,IAAA,0DAAA,IAAA,4EAAA;;;;AAAA,AAAA,AAAA8F,2DAkgGmC;kBAAA9F;AAAA,AAAA,IAAAA,QAAA;AAAA,AAAA;;;;AAlgGnC,AAAA,AAAA8F,yDAAA3F;;AAAA,AAAA,AAAA2F,8EAAA;kBAAAL,EAAAC;AAAA,AAAA,IAAAD,QAAA;AAAA,AAAA,OAAAE,wCAAA,2CAAA,gEAAA,MAAA,gEAAA,2CAAA,mCAAAD;;;;AAAA,AAAA,AAAAI,+CAAA3F;;AAAA,AAAA,AAAA2F,4DAAA;wBAAAC,NAAuBM;AAAvB,AAAA,IAAAL,aAAAD;IAAAC,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAA7F,gCAAA,AAAA6F,+BAAA,KAAA,OAAA,QAAA,AAAA5F,8CAAAC,mBAAA2F,YAAAA;qBAAA,AAAA1F,4CAAA0F,eAAA,5EAAoCM;gBAApC,AAAAhG,4CAAA0F,eAAA,vEAAgDO;AAAhD,AAAA,gBAAA,ZAAuBF;AAAvB,AAAA,0FAAA,uIAAA;;;;AAAA,AAAA,AAAAP,gDAAA3F;;AAAA,AAAA,AAAA2F,6DAAA;kBAAuBO;AAAvB,AAAA,gBAAA,ZAAuBA;AAAvB,AAAA,0FAAA,gEAAA;;;;AAAAP;AAAA,AAAA,AAAAjF,qEAAA;;AAAA,AAAA,AAAAA,wEAAA;;AAAA,AAAA,AAAAA,6EAAA,WAAAoF,oBAAAC,sBAAAC;AAAA,AAAA,OAAAC,iBAAAF,sBAAA;;AAwBA,AAAK+B,2DAAoB,AAAChB,+DAAapG","names":["cljs.core/-add-method","fulcro.client.mutations/mutate","env43234","_","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","map__43235","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","state","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4","cljs.core/assoc-in","env","env43250","map__43251","fulcro.inspect.ui.dom-history-viewer/DOMHistoryView","this__38666__auto__","js/React.Component","goog.object/clone","js/React.Component.prototype","x43282","this__38521__auto__","goog.object/set","next-props__38522__auto__","next-state__38523__auto__","ident__38530__auto__","fulcro.client.primitives/ident","fulcro.client.primitives/props","next-ident__38531__auto__","fulcro.client.primitives/-next-props","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","idxr__38532__auto__","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","fulcro.client.primitives/get-reconciler","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","indexes__38533__auto__","cljs.core.update_in.cljs$core$IFn$_invoke$arity$4","cljs.core/disj","cljs.core.fnil.cljs$core$IFn$_invoke$arity$2","cljs.core/conj","fulcro.client.primitives/merge-pending-props!","fulcro.client.primitives/merge-pending-state!","fulcro.client.primitives/*blindly-render*","next-children__38524__auto__","goog.object/get","G__43287","fulcro.client.primitives/FulcroProps","fulcro.client.primitives/unwrap","current-props__38525__auto__","next-props-stale?__38526__auto__","fulcro.client.primitives/get-basis-time","props-changed?__38527__auto__","state-changed?__38528__auto__","and__3911__auto__","G__43288","G__43289","children-changed?__38529__auto__","or__3922__auto__","r__38537__auto__","cfg__38538__auto__","st__38539__auto__","indexer__38536__auto__","cljs.core/deref","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic","cljs.core/update-in","cljs.core/dissoc","fulcro.client.impl.protocols/drop-component!","prev-props__38534__auto__","prev-state__38535__auto__","fulcro.client.primitives/clear-prev-props!","fulcro.client.impl.protocols/index-component!","this__38520__auto__","*reconciler*43293","fulcro.client.primitives/*reconciler*","*depth*43294","fulcro.client.primitives/*depth*","*shared*43295","fulcro.client.primitives/*shared*","*instrument*43296","fulcro.client.primitives/*instrument*","*parent*43297","fulcro.client.primitives/*parent*","fulcro.client.primitives/depth","fulcro.client.primitives.shared.cljs$core$IFn$_invoke$arity$1","fulcro.client.primitives/instrument","map__43301","map__43302","fulcro.client.primitives.get_computed.cljs$core$IFn$_invoke$arity$1","map__43303","fulcro-css.css/get-classnames","x43307","c","params","fulcro.client.primitives/make-state-map","p__43311","map__43312","x43314","p__43318","map__43319","this__38669__auto__","writer__38670__auto__","opt__38671__auto__","cljs.core/-write","this","visible?","app-state","target-app","dom-overlay","hidden","temp__5457__auto__","reconciler","app-root-class","fulcro.client.primitives/react-type","fulcro.client.primitives/app-root","app-root-class-factory","fulcro.client.primitives.factory.cljs$core$IFn$_invoke$arity$1","root-query","fulcro.client.primitives.get_query.cljs$core$IFn$_invoke$arity$2","view-tree","fulcro.client.primitives.db__GT_tree.cljs$core$IFn$_invoke$arity$3","fulcro.client.dom/macro-create-element*","fulcro.util/force-children","cljs.core/vec","cljs.core.sequence.cljs$core$IFn$_invoke$arity$1","cljs.core/seq","cljs.core.concat.cljs$core$IFn$_invoke$arity$1","cljs.core/List","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core/array-map","cljs.core.concat.cljs$core$IFn$_invoke$arity$0","fulcro.client.primitives.transact_BANG_.cljs$core$IFn$_invoke$arity$2","fulcro.inspect.ui.dom-history-viewer/ui-dom-history-view"],"sourcesContent":["(ns fulcro.inspect.ui.dom-history-viewer\n  (:require [fulcro.client.primitives :as prim :refer [defsc]]\n            [fulcro.client.mutations :as m :refer [defmutation]]\n            [fulcro-css.css :as css]\n            [fulcro.client.dom :as dom]\n            [fulcro.client.primitives :as fp]))\n\n(defmutation show-dom-preview [_]\n  (action [{:keys [state]}]\n    (swap! state assoc-in [::dom-viewer :singleton :ui/visible?] true))\n  (refresh [env] [:ui/historical-dom-view]))\n\n(defmutation hide-dom-preview [_]\n  (action [{:keys [state]}]\n    (swap! state assoc-in [::dom-viewer :singleton :ui/visible?] false))\n  (refresh [env] [:ui/historical-dom-view]))\n\n(defsc DOMHistoryView [this {:keys [ui/visible? app-state]} {:keys [target-app]} {:keys [dom-overlay hidden]}]\n  {:query         [:ui/visible? :app-state]\n   :initial-state {:ui/visible? false :app-state {}}\n   :ident         (fn [] [::dom-viewer :singleton])\n   :css           [[:.close {:margin-left \"100px\"}]\n                   [:.hidden {:display :none}]\n                   [:.dom-overlay {:z-index          10000\n                                   :position         :absolute\n                                   :width            \"100vw\"\n                                   :height           \"100vh\"\n                                   :top              0\n                                   :left             0\n                                   :opacity          0.8\n                                   :background-color :white}]]}\n  (when-let [reconciler (:reconciler target-app)]\n    (let [app-root-class         (prim/react-type (prim/app-root reconciler))\n          app-root-class-factory (prim/factory app-root-class)\n          root-query             (prim/get-query app-root-class app-state)\n          view-tree              (prim/db->tree root-query app-state app-state)]\n      (dom/div #js {:className (str dom-overlay \" \" (when-not visible? hidden))\n                    :title     \"Click to close preview.\"\n                    :onClick   #(fp/transact! this `[(hide-dom-preview {})])}\n        (app-root-class-factory view-tree)))))\n\n(def ui-dom-history-view (prim/factory DOMHistoryView))\n"]}